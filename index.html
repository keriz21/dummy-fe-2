<!DOCTYPE html>
<html lang="id">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Login - Dashboard App</title>
		<link rel="stylesheet" href="assets/css/style.css" />
	</head>
	<body>
		<div id="toast-container"></div>

		<div class="login-container">
			<div class="login-box">
				<h1>Login</h1>
				<form id="loginForm">
					<div class="form-group">
						<label for="username">Username</label>
						<input type="text" id="username" name="username" required />
					</div>
					<div class="form-group">
						<label for="password">Password</label>
						<input type="password" id="password" name="password" required />
					</div>
					<button type="submit" class="btn btn-primary">Login</button>
				</form>
				<p class="register-link">
					Belum punya akun? <a href="#" id="showRegister">Daftar di sini</a>
				</p>
			</div>

			<div class="register-box" style="display: none">
				<h1>Register</h1>
				<form id="registerForm">
					<div class="form-group">
						<label for="regUsername">Username</label>
						<input type="text" id="regUsername" name="username" required />
					</div>
					<div class="form-group">
						<label for="regEmail">Email</label>
						<input type="email" id="regEmail" name="email" required />
					</div>
					<div class="form-group">
						<label for="regPassword">Password</label>
						<input type="password" id="regPassword" name="password" required />
					</div>
					<div class="form-group">
						<label for="regFullName">Nama Lengkap</label>
						<input type="text" id="regFullName" name="fullName" required />
					</div>
					<button type="submit" class="btn btn-primary">Daftar</button>
				</form>
				<p class="register-link">
					Sudah punya akun? <a href="#" id="showLogin">Login di sini</a>
				</p>
			</div>
		</div>

		<script>
			// Handle redirect from 404.html
			(function () {
				const redirect = sessionStorage.redirect;
				delete sessionStorage.redirect;
				if (redirect && redirect !== location.href) {
					// If user was trying to access a protected page, check if authenticated
					if (localStorage.getItem("currentUser")) {
						history.replaceState(null, null, redirect);
					}
				}
			})();
		</script>
		<script src="assets/js/utils.js"></script>
		<script src="assets/js/auth.js"></script>
		<script src="assets/js/login.js"></script>
	</body>
</html>
